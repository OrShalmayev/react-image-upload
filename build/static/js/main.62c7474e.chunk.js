(this.webpackJsonpimage_uploader=this.webpackJsonpimage_uploader||[]).push([[0],{47:function(e,a,t){},66:function(e,a,t){},71:function(e,a,t){"use strict";t.r(a);var n=t(2),r=t(0),o=t.n(r),c=t(14),s=t.n(c),i=(t(47),t(35)),l=t.n(i),d=(t(66),t(36)),u=t(25),p=o.a.createContext({file:null,dragging:!1,uploading:!1,isUploaded:!1,uploadedFileName:null,error:null,setContextState:function(){}}),g=function(e){var a={file:null,dragging:!1,uploading:!1,error:null,setContextState:function(e){s(Object(u.a)(Object(u.a)({},c),e))}},t=o.a.useState(a),r=Object(d.a)(t,2),c=r[0],s=r[1];return Object(n.jsx)(p.Provider,{value:c,children:e.children})},f=t(89),m=t(93),j=t(90),h=t(92),x=t(88),b=t(91),O=t.p+"static/media/image.3710b8a3.svg",v=Object(x.a)({container:{maxWidth:"30%",minHeight:"50%",padding:"2rem",background:"#fff",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white"},upload:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",margin:"2rem auto",padding:"2rem",width:"85%",minHeight:"20rem",border:"2px dashed #929292",borderRadius:"13px",backgroundColor:"#e6e6e6",transition:"all 0.3s ease-in-out","&.active":{border:"3px dashed green",opacity:"0.8"},"& > *:not(:last-child)":{marginBottom:"3rem"},"&-img":{maxWidth:"10rem"}},choose_file:{width:"50%",alignSelf:"center",fontSize:"1.5rem",textTransform:"none"},h:{"&--1":{fontSize:"3rem",color:"#000",textAlign:"center"}},p:{"&--1":{color:"#000",fontSize:"1.5rem"},"&--2":{color:"#929292",fontSize:"1.3rem"}}});function S(){var e=o.a.useContext(p);return o.a.useEffect((function(){console.log("App State",e)}),[e]),Object(n.jsx)(g,{children:Object(n.jsx)(S.Main,{})})}function C(){var e=o.a.useContext(p),a=o.a.useRef(),t=o.a.useRef(0),r=o.a.useRef({headers:{"content-type":"multipart/form-data"}});o.a.useEffect((function(){console.log("appState updated",e)}),[e]),o.a.useEffect((function(){return a.current.addEventListener("dragenter",d),a.current.addEventListener("dragleave",u),a.current.addEventListener("dragover",i),a.current.addEventListener("drop",g),function(){}}),[]),o.a.useEffect((function(){console.log("files updated",e.file)}),[e.file]);var c=v(),s=l.a.create({baseURL:"http://localhost:8000",timeout:2e4}),i=function(e){e.preventDefault(),e.stopPropagation()},d=function(a){a.preventDefault(),a.stopPropagation(),a.dataTransfer.items&&a.dataTransfer.items.length>0&&(t++,e.setContextState({dragging:!0,file:a.dataTransfer.files[0],error:null}))},u=function(a){a.preventDefault(),a.stopPropagation(),--t>0||e.setContextState({dragging:!1})},g=function(a){if(a.preventDefault(),a.stopPropagation(),a.dataTransfer.files&&a.dataTransfer.files.length>0){var n=new FormData;n.append("myImage",a.dataTransfer.files[0]),e.setContextState({uploading:!0}),s.post("/upload",n,{config:r,onUploadProgress:function(e){console.log("progressEvent",e);var a=Math.round(100*e.loaded/e.total);console.log("percentCompleted",a)}}).then((function(a){console.log("response:****",a.data),setTimeout((function(){e.setContextState({uploading:!1,isUploaded:!0,uploadedFileName:"".concat(window.location.origin,"/assets/images/").concat(a.data),error:null})}),1e3)})).catch((function(a){e.setContextState({uploading:!1,error:!0}),console.log(new N(a))})),a.dataTransfer.clearData(),t=0,e.setContextState({dragging:!1,uploading:!0,file:a.dataTransfer.files[0],error:null})}};return Object(n.jsx)(o.a.Fragment,{children:Object(n.jsx)(h.a,{className:"App",children:Object(n.jsxs)(f.a,{className:c.container,children:[Object(n.jsx)(j.a,{className:"".concat(c.p,"--1"),paragraph:"true",children:"Upload your image"}),Object(n.jsxs)(h.a,{className:"".concat(c.upload," ").concat(e.dragging?"active":""),ref:a,children:[Object(n.jsx)("img",{className:"".concat(c.upload,"-img"),src:O,alt:"mountains"}),Object(n.jsx)(j.a,{className:"".concat(c.p,"--2"),paragraph:"true",children:"File should be Jpeg, Png"})]}),Object(n.jsx)(m.a,{className:c.choose_file,variant:"contained",color:"primary",children:"Choose a file"})]})})})}function N(){var e=v();return Object(n.jsx)(j.a,{className:"".concat(e.p,"--1"),paragraph:"true",children:"Error"})}S.Main=function(){var e=o.a.useContext(p);return o.a.useEffect((function(){console.log("Main State",e)}),[e]),Object(n.jsx)(o.a.Fragment,{children:!0===e.uploading?Object(n.jsx)(S.Loading,{}):e.isUploaded?Object(n.jsx)(S.UploadedSuccessfully,{}):Object(n.jsx)(S.Upload,{})})},S.Upload=C,S.UploadedSuccessfully=function(){var e=o.a.useContext(p),a=v();return Object(n.jsx)(o.a.Fragment,{children:Object(n.jsx)(h.a,{className:"App",children:Object(n.jsxs)(f.a,{className:a.container,children:[Object(n.jsx)(j.a,{className:"".concat(a.p,"--1"),paragraph:"true",children:"Uploaded Successfully"}),Object(n.jsxs)(h.a,{className:"".concat(a.upload),children:[Object(n.jsx)("img",{className:"".concat(a.upload,"-img"),src:"".concat(e.uploadedFileName),alt:"mountains"}),Object(n.jsx)(j.a,{className:"".concat(a.p,"--2"),paragraph:"true",children:"File should be Jpeg, Png"})]}),Object(n.jsx)(m.a,{className:a.choose_file,variant:"contained",color:"primary",children:"Choose a file"})]})})})},S.Loading=function(){var e=v();return Object(n.jsx)(h.a,{className:"App",children:Object(n.jsxs)(f.a,{className:e.container,children:[Object(n.jsx)(j.a,{className:"".concat(e.p,"--1"),paragraph:"true",children:"Uploading..."}),Object(n.jsx)(b.a,{disableShrink:!0})]})})},S.Error=C;var E=S,F=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,96)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,o=a.getLCP,c=a.getTTFB;t(e),n(e),r(e),o(e),c(e)}))};s.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(E,{})}),document.getElementById("root")),F()}},[[71,1,2]]]);
//# sourceMappingURL=main.62c7474e.chunk.js.map